---
version: "3.8"
services:
    cassandra:
        deploy:
            resources:
                limits:
                    cpus: '2.0'
                    memory: 3G
                reservations:
                    memory: 1.7G
    init-keyspace:
        deploy:
            resources:
                limits:
                    cpus: '1.0'
                    memory: 100M
                reservations:
                    memory: 6M
    mysql:
        deploy:
            resources:
                limits:
                    cpus: '2.0'
                    memory: 500M
                reservations:
                    memory: 250M
    redis:
        deploy:
            resources:
                limits:
                    cpus: '0.50'
                    memory: 50M
                reservations:
                    memory: 20M
    smtp:
        deploy:
            resources:
                limits:
                    cpus: '0.2'
                    memory: 30M
                reservations:
                    memory: 10M
    nginx:
        deploy:
            resources:
                limits:
                    cpus: '1.0'
                    memory: 500M
                reservations:
                    memory: 6M
    tracker-1:
        deploy:
            resources:
                limits:
                    cpus: '2.0'
                    memory: 200M
                reservations:
                    memory: 150M
    tracker-2:
        deploy:
            resources:
                limits:
                    cpus: '2.0'
                    memory: 200M
                reservations:
                    memory: 150M
    tracker-3:
        deploy:
            resources:
                limits:
                    cpus: '2.0'
                    memory: 200M
                reservations:
                    memory: 150M
    broker-node-storage-1:
        deploy:
            resources:
                limits:
                    cpus: '2.0'
                    memory: 200M
                reservations:
                    memory: 150M
    broker-node-no-storage-1:
        deploy:
            resources:
                limits:
                    cpus: '2.0'
                    memory: 200M
                reservations:
                    memory: 150M
    broker-node-no-storage-2:
        deploy:
            resources:
                limits:
                    cpus: '2.0'
                    memory: 200M
                reservations:
                    memory: 150M
    core-api:
        deploy:
            resources:
                limits:
                    cpus: '2.0'
                    memory: 1500M
                reservations:
                    memory: 500M
    ethereum-watcher:
        deploy:
            resources:
                limits:
                    cpus: '2.00'
                    memory: 500M
                reservations:
                    memory: 100M
    platform:
        deploy:
            resources:
                limits:
                    cpus: '0.50'
                    memory: 50M
                reservations:
                    memory: 10M
    network-explorer:
        deploy:
            resources:
                limits:
                    cpus: '1.0'
                    memory: 50M
                reservations:
                    memory: 10M
    parity-node0:
        deploy:
            resources:
                limits:
                    cpus: '1.0'
                    memory: 100M
                reservations:
                    memory: 20M
    parity-sidechain-node0:
        deploy:
            resources:
                limits:
                    cpus: '1.0'
                    memory: 100M
                reservations:
                    memory: 20M
    bridge-rabbitmq:
        deploy:
            resources:
                limits:
                    cpus: '0.5'
                    memory: 150M
                reservations:
                    memory: 50M
    bridge-request:
        deploy:
            resources:
                limits:
                    cpus: '0.5'
                    memory: 100M
                reservations:
                    memory: 10M
    bridge-affirmation:
        deploy:
            resources:
                limits:
                    cpus: '0.5'
                    memory: 100M
                reservations:
                    memory: 10M
    bridge-senderhome:
        deploy:
            resources:
                limits:
                    cpus: '0.5'
                    memory: 100M
                reservations:
                    memory: 10M
    bridge-senderforeign:
        deploy:
            resources:
                limits:
                    cpus: '0.5'
                    memory: 100M
                reservations:
                    memory: 10M
    bridge:
        deploy:
            resources:
                limits:
                    cpus: '0.1'
                    memory: 10M
                reservations:
                    memory: 10M
    graph-node:
        deploy:
            resources:
                limits:
                    cpus: '0.5'
                    memory: 200M
                reservations:
                    memory: 20M
    graph-deploy-streamregistry-subgraph:
        deploy:
            resources:
                limits:
                    cpus: '0.5'
                    memory: 200M
                reservations:
                    memory: 20M
    deploy-hub-subgraph:
        deploy:
            resources:
                limits:
                    cpus: '0.5'
                    memory: 200M
                reservations:
                    memory: 20M
    graph-deploy-dataunion-subgraph:
        deploy:
            resources:
                limits:
                    cpus: '0.5'
                    memory: 200M
                reservations:
                    memory: 20M
    ipfs:
        deploy:
            resources:
                limits:
                    cpus: '1.0'
                    memory: 150M
                reservations:
                    memory: 10M
    postgres:
        deploy:
            resources:
                limits:
                    cpus: '1.0'
                    memory: 100M
                reservations:
                    memory: 10M
    chainlink:
        deploy:
            restart_policy:
                condition: on-failure
                max_attempts: 5
            resources:
                limits:
                    cpus: '1.0'
                    memory: 1G
                reservations:
                    memory: 50M
    chainlink-external-adapter:
        deploy:
            resources:
                limits:
                    cpus: '1.0'
                    memory: 1G
                reservations:
                    memory: 50M
